# 5.5 连接池

连接池的重要性,这时就不赘述了,下面具体介绍框架中实现的哪些连接池。

有关于连接池有一个配置项

```
//启动一个新进程维护连接池
$config['asyn_process_enable'] = false;
```

## Redis连接池

### 主要特性

- 支持异步+协程
- 支持分布式自动分片
- 支持master-slave读写分离
- 支持故障自动failover
- 支持断线重连
- 支持自动提取和归还连接

### 配置

```php
<?php
/**
 * 本地环境
 */
$config['redis']['tw']['ip']               = '127.0.0.1';
$config['redis']['tw']['port']             = 6379;
//$config['redis']['tw']['password']       = 'xxxx';
//$config['redis']['tw']['select']         = 1;
//$config['redis']['tw']['redisSerialize'] = \Redis::SERIALIZER_PHP;
//$config['redis']['tw']['phpSerialize']   = \Redis::SERIALIZER_NONE;
//$config['redis']['tw']['hashKey']        = 1;
//$config['redis']['tw']['keyPrefix']      = 'hotpot_';
return $config;
```

示例配置代码:

[./php-msf/app/config/docker/redis.php](https://github.com/PGWireless/php-msf/blob/app/config/docker/redis.php)

- $config['redis']

代表Redis相关配置

- tw

这里的tw仅代表一台或者一组Redis服务器,在使用连接池时会用到,如果Redis服务器端分片（比如twemproxy）就填写为集群导出的地址与端口等信息。

- ip

Redis服务器地址

- port

Redis服务器端口

- password

Redis认证密钥

- select

Redis DB

- redisSerialize

Redis序列化选项等同于phpredis序列化的各个选项如:\Redis::SERIALIZER_PHP,\Redis::SERIALIZER_IGBINARY

- phpSerialize

PHP序列化选项,为了兼容yii迁移项目的set,get,mset,mget,选项如:\Redis::SERIALIZER_PHP,\Redis::SERIALIZER_IGBINARY

- hashKey

是否将key md5后储存,默认为0,开启为1

- keyPrefix

设置key的前缀

## MySQL连接池


# links
  * [目录](<preface-目录.md>)
  * 上一节: [请求上下文](<05.4-请求上下文.md>)
  * 下一节: [对象池](<05.6-对象池.md>)